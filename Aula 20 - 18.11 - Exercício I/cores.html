<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CORES</title>
    <style>
        main{
            display: flex;
            flex-wrap: wrap;
        }
        button:not(#add){
            width: 10rem;
            height: 10rem;
            border: 1px solid white;
            border-radius: 100%;
            cursor: pointer;
            margin: 0.25rem;
        }
        button#add{
            padding: 1rem;
            border-radius: 0;
            cursor: pointer;
            height: 20%;
            margin-left: 2.25rem;
            margin-top: 3.25rem;
        }
    </style>
</head>
<body>
    <main></main>
    <script>
        let qntd = 100
        let main = document.querySelector('main')
        function btn_criar(a = 0){
            let antigoadd = document.getElementById('add')
            if(antigoadd != null){
                antigoadd.remove()
            }
            if(a == 0){
                for(let n = 0; n < qntd; n++){
                    let btn = document.createElement('button');
                    btn.setAttribute('onclick', 'mudarcor(this.style.backgroundColor)')
                    main.appendChild(btn);
                }
            }else{
                let btn = document.createElement('button');
                btn.setAttribute('onclick', 'mudarcor(this.style.backgroundColor)')
                btn.style.backgroundColor = a
                main.appendChild(btn);
            }
            let add = document.createElement('button')
            add.textContent = 'Adicionar'
            add.id = 'add'
            add.onclick = btn_maisum
            main.appendChild(add);
        }
        function btn_maisum(){
            qntd++
            let r = Math.floor(Math.random() * 256);
            let g = Math.floor(Math.random() * 256);
            let b = Math.floor(Math.random() * 256);            
            btn_criar(`rgb(${r},${g},${b})`)
        }
        function btn_cor(){
            let btns = document.querySelectorAll('button:not(#add)');
            for(let n = 0; n < btns.length; n++){
                let r = Math.floor(Math.random() * 256);
                let g = Math.floor(Math.random() * 256);
                let b = Math.floor(Math.random() * 256);
                btns[n].style.backgroundColor = `rgb(${r},${g},${b})`;
            }
        }
        function mudarcor(cor){
            document.body.style.backgroundColor = cor;
        }
        btn_criar();
        btn_cor()
        setInterval(btn_cor, 2000);
    </script>

</body>
</html>